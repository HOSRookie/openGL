# GLEX - é¸¿è’™ç”Ÿæ€é¦–ä¸ªå¼€æº OpenGL ES æ¸²æŸ“æ¡†æ¶

<div align="center">

**ğŸ¯ HarmonyOS ç”Ÿæ€é¦–ä¸ªå¼€æºçš„åŸç”Ÿ OpenGL æ¸²æŸ“æ¡†æ¶**

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](LICENSE)
[![HarmonyOS](https://img.shields.io/badge/HarmonyOS-API%2012+-orange.svg)](https://developer.huawei.com/consumer/cn/harmonyos/)
[![OpenGL ES](https://img.shields.io/badge/OpenGL%20ES-3.0%2B-green.svg)](https://www.khronos.org/opengles/)

[English](README_EN.md) | ç®€ä½“ä¸­æ–‡

</div>

## ä¸ºä»€ä¹ˆéœ€è¦ GLEXï¼Ÿ

åœ¨ HarmonyOS ç”Ÿæ€ä¸­ï¼Œå¼€å‘è€…é¢ä¸´ç€è¿™äº›ç—›ç‚¹ï¼š

- âŒ **EGL åˆå§‹åŒ–ç¹ç** â€” éœ€è¦æ‰‹å†™æ•°ç™¾è¡Œæ ·æ¿ä»£ç å¤„ç† EGL é…ç½®ã€ä¸Šä¸‹æ–‡åˆ›å»ºã€Surface ç»‘å®š
- âŒ **XComponent é›†æˆå¤æ‚** â€” NAPI æ¡¥æ¥ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€çº¿ç¨‹åŒæ­¥ï¼Œé—¨æ§›æé«˜
- âŒ **ç¼ºå°‘æ¸²æŸ“æŠ½è±¡** â€” æ¯ä¸ªé¡¹ç›®éƒ½è¦é‡å¤é€ è½®å­ï¼Œæ²¡æœ‰ç»Ÿä¸€çš„ Shader ç®¡ç†å’Œæ¸²æŸ“ç®¡çº¿
- âŒ **æ²¡æœ‰å‚è€ƒå®ç°** â€” ç¤¾åŒºç¼ºå°‘å®Œæ•´çš„ã€å¯ç›´æ¥ä½¿ç”¨çš„ OpenGL æ¡†æ¶

**GLEX æ˜¯é¸¿è’™ç”Ÿæ€é¦–ä¸ªè§£å†³è¿™äº›é—®é¢˜çš„å¼€æºæ¡†æ¶ã€‚**

## æ ¸å¿ƒä»·å€¼

### ğŸš€ å¼€ç®±å³ç”¨çš„ ArkTS ç»„ä»¶

```typescript
import { GLEXComponent } from '@yunshen1933/ohos_glex';

@Entry
@Component
struct MyPage {
  build() {
    GLEXComponent({ targetFPS: 60 })
      .width('100%')
      .height(400)
  }
}
```

**3 è¡Œä»£ç ï¼Œå¯åŠ¨ 60 FPS çš„ OpenGL æ¸²æŸ“ã€‚** æ— éœ€äº†è§£ EGLã€NAPIã€XComponent çš„ä»»ä½•ç»†èŠ‚ã€‚

### ğŸ—ï¸ å·¥ä¸šçº§æ¶æ„è®¾è®¡

GLEX ä¸æ˜¯ç®€å•çš„ Demoï¼Œè€Œæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„ç”Ÿäº§çº§æ¡†æ¶ï¼š

- **åˆ†å±‚æ¸…æ™°** â€” EGL ç®¡ç† â†’ Shader å·¥å…· â†’ æ¸²æŸ“ç®¡çº¿ â†’ ArkTS ç»„ä»¶ï¼Œæ¯å±‚èŒè´£æ˜ç¡®
- **çº¿ç¨‹å®‰å…¨** â€” ç‹¬ç«‹æ¸²æŸ“çº¿ç¨‹ï¼Œè‡ªåŠ¨å¤„ç† GL ä¸Šä¸‹æ–‡åˆ‡æ¢å’ŒåŒæ­¥
- **å¯æ‰©å±•æ€§** â€” RenderPass æŠ½è±¡åŸºç±»ï¼Œæ”¯æŒå¤šé˜¶æ®µæ¸²æŸ“ç®¡çº¿ç¼–æ’
- **å®¹é”™æœºåˆ¶** â€” ES 3.2 â†’ 3.0 â†’ 2.0 è‡ªåŠ¨é™çº§ï¼Œå…¼å®¹ä¸åŒè®¾å¤‡èƒ½åŠ›

### ğŸ’ å®Œæ•´çš„ C++ å®ç°

```cpp
class MyCustomPass : public glex::RenderPass {
protected:
    void onInitialize(int width, int height) override {
        shader_.build(vertexSrc, fragmentSrc);
    }

    void onRender() override {
        shader_.use();
        shader_.setUniform1f("u_time", time_);
        // ä½ çš„æ¸²æŸ“é€»è¾‘
    }
};
```

æä¾›å®Œæ•´çš„ C++ æºç ï¼ŒåŒ…æ‹¬ï¼š
- `GLContext` â€” EGL ä¸Šä¸‹æ–‡ç®¡ç†
- `ShaderProgram` â€” ç€è‰²å™¨ç¼–è¯‘ä¸ Uniform ç¼“å­˜
- `RenderPass` / `RenderPipeline` â€” æ¸²æŸ“ç®¡çº¿æŠ½è±¡
- `RenderThread` â€” ç‹¬ç«‹æ¸²æŸ“çº¿ç¨‹ä¸å¸§ç‡æ§åˆ¶

### ğŸ¨ å†…ç½®æ¼”ç¤ºæ•ˆæœ

![GLEX æ˜Ÿç©ºæ¼”ç¤º](library/screenshots/demo.png)

**200 é¢—é—ªçƒæ˜Ÿæ˜Ÿ + æµæ˜Ÿæ‹–å°¾åŠ¨ç”»**ï¼Œå…¨éƒ¨ç”± OpenGL ES 3.0 Shader å®æ—¶æ¸²æŸ“ï¼Œå±•ç¤ºæ¡†æ¶çš„å®é™…èƒ½åŠ›ã€‚

## æŠ€æœ¯äº®ç‚¹

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **é›¶ä¾èµ–** | ä»…ä¾èµ– HarmonyOS ç³»ç»Ÿåº“ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ– |
| **é«˜æ€§èƒ½** | ç‹¬ç«‹æ¸²æŸ“çº¿ç¨‹ï¼Œç¨³å®š 60 FPSï¼Œå®æ—¶ FPS ç»Ÿè®¡ |
| **è‡ªåŠ¨åŒ–** | XComponent ç”Ÿå‘½å‘¨æœŸå…¨è‡ªåŠ¨ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç† |
| **ç±»å‹å®‰å…¨** | å®Œæ•´çš„ TypeScript ç±»å‹å£°æ˜ |
| **ç°ä»£ C++** | C++17 æ ‡å‡†ï¼ŒRAII èµ„æºç®¡ç†ï¼Œæ™ºèƒ½æŒ‡é’ˆ |
| **è·¨æ¶æ„** | æ”¯æŒ arm64-v8a å’Œ x86_64 |

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
ohpm install @yunshen1933/ohos_glex
```

### åŸºç¡€ä½¿ç”¨

```typescript
import { GLEXComponent, GLInfo } from '@yunshen1933/ohos_glex';

@Entry
@Component
struct DemoPage {
  build() {
    Column() {
      GLEXComponent({
        targetFPS: 60,
        clearColor: [0.02, 0.03, 0.10, 1.0],
        autoStart: true,
        onReady: () => {
          console.info('OpenGL æ¸²æŸ“å·²å¯åŠ¨');
        }
      })
        .width('100%')
        .height('100%')
    }
  }
}
```

### è·å–è¿è¡Œæ—¶ä¿¡æ¯

```typescript
private glexRef: GLEXComponent | null = null;

GLEXComponent({
  targetFPS: 60,
  onReady: () => {
    const fps = this.glexRef?.getCurrentFPS();
    const info: GLInfo | undefined = this.glexRef?.getGLInfo();
    console.info(`FPS: ${fps}, GPU: ${info?.renderer}`);
  }
})
```

## æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ArkTS Layer (GLEXComponent)            â”‚  â† å£°æ˜å¼ UI ç»„ä»¶
â”œâ”€ï¿½ï¿½â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  NAPI Bridge                             â”‚  â† JS â†” Native æ¡¥æ¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RenderThread (ç‹¬ç«‹çº¿ç¨‹)                 â”‚  â† å¸§ç‡æ§åˆ¶ + FPS ç»Ÿè®¡
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  RenderPipeline                          â”‚  â† å¤šé˜¶æ®µæ¸²æŸ“ç®¡çº¿
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Pass 1   â”‚ Pass 2   â”‚ Pass N   â”‚     â”‚  â† å¯æ‰©å±•çš„æ¸²æŸ“é˜¶æ®µ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  GLContext â”‚ ShaderProgram              â”‚  â† æ ¸å¿ƒå·¥å…·ç±»
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  EGL / OpenGL ES 3.x                    â”‚  â† ç³»ç»Ÿ API
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é€‚ç”¨åœºæ™¯

- âœ… **æ¸¸æˆå¼•æ“** â€” 2D/3D æ¸¸æˆæ¸²æŸ“
- âœ… **æ•°æ®å¯è§†åŒ–** â€” å¤§è§„æ¨¡ç²’å­ç³»ç»Ÿã€å®æ—¶å›¾è¡¨
- âœ… **å›¾åƒå¤„ç†** â€” GPU åŠ é€Ÿçš„æ»¤é•œã€ç‰¹æ•ˆ
- âœ… **AR/VR** â€” æ²‰æµ¸å¼ä½“éªŒ
- âœ… **åˆ›æ„åº”ç”¨** â€” éŸ³ä¹å¯è§†åŒ–ã€ç”Ÿæˆè‰ºæœ¯

## æ–‡æ¡£

- [å®Œæ•´ API æ–‡æ¡£](library/README.md)
- [ç¯å¢ƒé…ç½®æŒ‡å—](SETUP.md)
- [ç¤ºä¾‹ä»£ç ](entry/src/main/ets/pages/Index.ets)

## ç³»ç»Ÿè¦æ±‚

- **å¼€å‘ç¯å¢ƒ**: DevEco Studio 5.0.0+
- **HarmonyOS SDK**: API 12 (6.0.2)+
- **è®¾å¤‡è¦æ±‚**: æ”¯æŒ OpenGL ES 3.0+
- **æ”¯æŒè®¾å¤‡**: phoneã€tabletã€2in1
- **ABI æ¶æ„**: arm64-v8aã€x86_64

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [Apache License 2.0](LICENSE) å¼€æºã€‚

## ä½œè€…

**äº‘æ·±** - é¸¿è’™ç”Ÿæ€å¼€å‘è€…

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Starï¼**

è¿™æ˜¯é¸¿è’™ç”Ÿæ€é¦–ä¸ªå¼€æºçš„ OpenGL æ¡†æ¶ï¼Œä½ çš„æ”¯æŒæ˜¯æŒç»­ç»´æŠ¤çš„åŠ¨åŠ›ã€‚

</div>
